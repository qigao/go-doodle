== Getting started

=== Install Golang (go1.11+)

Please check the official golang installation guide before you start. https://golang.org/doc/install[Official Documentation]
Also make sure you have installed a go1.11+ version.

=== Environment Config

For more info and detailed instructions please check this guide: https://github.com/golang/go/wiki/SettingGOPATH[Setting GOPATH]

=== Docker Preparation

install docker and docker-compose
[source,bash]
----
➜  sudo apt-get install docker docker-compose
----

enable docker service  then add current user to docker group

==== Edit .env
prepare .env for mysql server to generate db schemas
[source,dotenv]
----
DB_HOST=localhost
DB_NAME=gforum
DB_PORT=3306
DB_USER=forum
DB_PASSWORD=secret
----

load .env file
[source,bash]
----
export $(grep -v '^#' .env | xargs)
----

==== Edit sqlboiler.toml
sqlboiler is used to generate the database models.
[source,toml]
----
output   = "../entity"
wipe     = true
pkgname  = "entity"

[mysql]
dbname = "gforum"
host = "localhost"
port = 3306
user = "forum"
pass = "secret"
sslmode = "false"
----

mysql connection info should be identical to the one in the database docker.

=== Install dependencies

[source,bash]
----
➜  go install github.com/volatiletech/sqlboiler/v4@latest
➜  go install github.com/volatiletech/sqlboiler/v4/drivers/sqlboiler-mysql@latest
➜  go install github.com/vektra/mockery/v2@latest
➜  go install github.com/vburenin/ifacemaker@latest
➜  go mod download

----

=== Run

[source,bash]
----
➜ make start-mysql
➜ make gen-schema # for dev purpose only
➜ make gen-orm
➜ make stop-mysql
➜ make gen-mock
➜ make build

----

=== Build

[source,bash]
----
➜ go build

----

=== Tests

[source,bash]
----
➜ go test ./...
----
